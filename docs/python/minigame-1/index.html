<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <title>用Python写个文字小游戏（一） | 写代码养猫</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="用Python写个文字小游戏（一） 🔗前段时间老王写了个群友乱斗的文字小游戏，我觉得挺有意思的，决定自己也来写一个玩玩看，顺便写一个系列，连载下去。
既然是个决斗的游戏，肯定得有”人“，那就来先写个人，取个名叫Hero好了。然后先给角色一个基本属性，大名得有一个，有生命值，然后先加上攻击力和防御力，不妨先hardcode一下：
class Hero: def __init__(self, name: str, hp: int = 100, attack: int = 10, defence: int = 5): self.name = name self.hp = hp self.attack = attack self.defence = defence 然后还要写一个游戏的主类，负责整个游戏的循环
class Game: def demo(self): pass # Main loop def run(self): self.demo() 然后就是往demo函数里面先做一个简单能跑起来的逻辑啦。
总的来说，就是让两个小人较量一下，emmm回合制吧，有一个公式，然后双方会扣除生命值，生命值先掉到0的就失败啦。
先简单设计一个公式凑合一下：
伤害值=我方攻击力-对方防御力
$damage=max(0, ATK_{me}-DEF_{enemy})$
为了防止对方防御力比我方攻击力高的时候伤害是负数变成给对方回血，做了一丢丢保护。
然后代码就变成了这样：
def fight(self, attacker: Hero, defender: Hero) -&gt; bool: &#34;&#34;&#34; :return: true表示决出胜负，否则游戏继续 &#34;&#34;&#34; pass def demo(self): me = Hero(&#39;我&#39;) enemy = Hero(&#39;老板&#39;, defence=0) while True: # fight函数返回true则表示 if self.">
<meta name="generator" content="Hugo 0.83.1" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/custom.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />








  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">←</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">用Python写个文字小游戏（一）</h1>

    <div class="tip">
        <time datetime="2021-09-14 12:00:00 &#43;0800 CST">Sep 14, 2021</time>
        <span class="split">
          ·
        </span>
        <span>
          150 words
        </span>
        <span class="split">
          ·
        </span>
        <span>
          1 minute read
        </span>
    </div>

    
    


    <div class="content">
      <h1 id="用python写个文字小游戏一">用Python写个文字小游戏（一） <a href="#%e7%94%a8python%e5%86%99%e4%b8%aa%e6%96%87%e5%ad%97%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%b8%80" class="anchor">🔗</a></h1><p>前段时间老王写了个群友乱斗的文字小游戏，我觉得挺有意思的，决定自己也来写一个玩玩看，顺便写一个系列，连载下去。</p>
<p>既然是个决斗的游戏，肯定得有”人“，那就来先写个人，取个名叫Hero好了。然后先给角色一个基本属性，大名得有一个，有生命值，然后先加上攻击力和防御力，不妨先hardcode一下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Hero</span>:
	  <span style="color:#66d9ef">def</span> __init__(self, name: str, hp: int <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>, attack: int <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, defence: int <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>):
		    self<span style="color:#f92672">.</span>name <span style="color:#f92672">=</span> name
		    self<span style="color:#f92672">.</span>hp <span style="color:#f92672">=</span> hp
		    self<span style="color:#f92672">.</span>attack <span style="color:#f92672">=</span> attack
		    self<span style="color:#f92672">.</span>defence <span style="color:#f92672">=</span> defence
</code></pre></div><p>然后还要写一个游戏的主类，负责整个游戏的循环</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Game</span>:
		<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">demo</span>(self):
				<span style="color:#66d9ef">pass</span>

		<span style="color:#75715e"># Main loop</span>
	  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">run</span>(self):
		    self<span style="color:#f92672">.</span>demo()
</code></pre></div><p>然后就是往demo函数里面先做一个简单能跑起来的逻辑啦。</p>
<p>总的来说，就是让两个小人较量一下，emmm回合制吧，有一个公式，然后双方会扣除生命值，生命值先掉到0的就失败啦。</p>
<p>先简单设计一个公式凑合一下：</p>
<p>伤害值=我方攻击力-对方防御力</p>
<p>$damage=max(0, ATK_{me}-DEF_{enemy})$</p>
<p>为了防止对方防御力比我方攻击力高的时候伤害是负数变成给对方回血，做了一丢丢保护。</p>
<p>然后代码就变成了这样：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fight</span>(self, attacker: Hero, defender: Hero) <span style="color:#f92672">-&gt;</span> bool:
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    :return: true表示决出胜负，否则游戏继续
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    <span style="color:#66d9ef">pass</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">demo</span>(self):
    me <span style="color:#f92672">=</span> Hero(<span style="color:#e6db74">&#39;我&#39;</span>)
    enemy <span style="color:#f92672">=</span> Hero(<span style="color:#e6db74">&#39;老板&#39;</span>, defence<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
    <span style="color:#66d9ef">while</span> True:
			<span style="color:#75715e"># fight函数返回true则表示</span>
      <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>fight(me, enemy):
        <span style="color:#66d9ef">break</span>
      <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>fight(enemy, me):
        <span style="color:#66d9ef">break</span>
</code></pre></div><p>然后就是实现fight函数就好啦，还要打印一下每回合的动作，稍微增加一点观赏性&hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fight</span>(self, attacker: Hero, defender: Hero) <span style="color:#f92672">-&gt;</span> bool:
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    :return: true表示决出胜负，否则游戏继续
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    damage <span style="color:#f92672">=</span> max(<span style="color:#ae81ff">0</span>, attacker<span style="color:#f92672">.</span>attack <span style="color:#f92672">-</span> defender<span style="color:#f92672">.</span>defence)
    defender<span style="color:#f92672">.</span>hp <span style="color:#f92672">-=</span> damage
    <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;[{attacker.name}] 对 [{defender.name}] 攻击，造成 [{damage}] 点伤害&#39;</span>)
    <span style="color:#66d9ef">if</span> defender<span style="color:#f92672">.</span>hp <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0</span>:
        <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;[{defender.name}] 倒地不起，[{attacker.name}] 胜利了&#39;</span>)
    <span style="color:#66d9ef">return</span> defender<span style="color:#f92672">.</span>hp <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0</span>
</code></pre></div><p>然后加一行启动代码，就能够看到简单游戏的雏形了！</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    Game()<span style="color:#f92672">.</span>run()
</code></pre></div><p>来运行一下看看</p>
<pre><code>...
[老板] 对 [我] 攻击，造成 [5] 点伤害
[我] 对 [老板] 攻击，造成 [10] 点伤害
[老板] 倒地不起，[我] 胜利了
</code></pre><p>嗯哼。</p>

    </div>

    
    
    

</section>


    </main>
    
    <footer id="footer">
  	<div>
	<p>公众号「写代码养猫」</p>
	<img class="qrcode" alt="qrcode" src="/images/qrcode.jpg" />
</div>

    

    <div class="copyright">
    
       © Copyright 
       2021 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-cactus-plus'>nodejh</a>
      </div>
    
</footer>



  </body>
</html>
